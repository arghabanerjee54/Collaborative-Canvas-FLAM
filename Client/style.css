/* ===== Light Theme Variables ===== */
:root{
  --bg:#f5f7fb;
  --panel:#ffffff;
  --panel-alt:#fafbff;
  --line:#e6e8ef;
  --text:#0f172a;
  --muted:#6b7280;
  --accent:#3b82f6;
  --accent-2:#22c55e;
  --chip:#eef2ff;
  --whiteboard:#ffffff;
  --shadow: 0 10px 30px rgba(15,23,42,.08);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; color:var(--text);
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
  background:
    radial-gradient(900px 500px at -10% -20%, #e7f0ff 0%, transparent 60%),
    radial-gradient(900px 500px at 110% 20%, #eafaf0 0%, transparent 60%),
    var(--bg);
}

/* ===== Header ===== */
header{
  position: sticky; top:0; z-index:10;
  display:flex; gap:12px; align-items:center;
  padding:10px 14px;
  background: rgba(255,255,255,.8);
  backdrop-filter: blur(8px);
  border-bottom:1px solid var(--line);
}
.brand{ font-weight:800; letter-spacing:.2px; }

.icon-btn{
  display:inline-flex; align-items:center; justify-content:center;
  width:36px; height:36px; border-radius:10px;
  border:1px solid var(--line); background:var(--panel);
  color:#111827; cursor:pointer;
}
.icon-btn:hover{ background:#f3f4f6; }
.icon-btn svg{ width:18px; height:18px; }

.right{
  margin-left:auto; display:flex; gap:8px; align-items:center;
  background:var(--panel);
  border:1px solid var(--line);
  padding:6px; border-radius:12px;
  box-shadow: var(--shadow);
}
.right input{
  min-width:150px; padding:8px 10px; border-radius:10px;
  border:1px solid var(--line); background:var(--panel-alt);
}
.right button{
  padding:8px 12px; border-radius:10px; border:1px solid var(--line);
  background:linear-gradient(180deg, #fff, #f5f7fb);
  cursor:pointer;
}
.right button:hover{ filter:brightness(.98); }

/* ===== Layout ===== */
main{
  display:grid; grid-template-columns: 240px 1fr; gap:16px;
  max-width: 1500px; margin:16px auto; padding:0 16px 24px;
}

/* Collapsible sidebar: add .sidebar-collapsed on body */
body.sidebar-collapsed main{ grid-template-columns: 0 1fr; }
body.sidebar-collapsed aside{ width:0; padding:0; border-width:0; overflow:hidden; }

/* Sidebar */
aside{
  background:var(--panel); border:1px solid var(--line); border-radius:16px; padding:14px;
  min-height: calc(100vh - 140px); box-shadow: var(--shadow);
  transition: all .2s ease;
}
aside h3{ margin:6px 0 12px; color:var(--muted); font-weight:700; }
#users{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:10px; }
.user{ display:flex; align-items:center; gap:10px; }
.badge{ width:10px; height:10px; border-radius:50%; display:inline-block; }

/* Canvas area */
.canvas-wrap{
  position:relative; background:var(--panel); border:1px solid var(--line);
  border-radius:16px; overflow:hidden; min-height: calc(100vh - 120px);
  box-shadow: var(--shadow);
}

/* Whiteboard canvases */
canvas{ position:absolute; inset:0; width:100%; height:100%; }
#base{ z-index:0; background:var(--whiteboard); }
#temp{ z-index:1; }
#cursors{ z-index:2; pointer-events:none; }

/* ===== Floating toolbox ===== */
.toolbox{
  position:absolute; top:14px; left:14px; z-index:5;
  display:flex; flex-direction:column; gap:10px;
  background: rgba(255,255,255,.9);
  border:1px solid var(--line); border-radius:14px; padding:10px;
  box-shadow: var(--shadow);
}

.tool-row{ display:flex; align-items:center; gap:8px; }

.tool-btn{
  width:36px; height:36px; border-radius:10px; border:1px solid var(--line);
  background:var(--panel); color:#111827; cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
}
.tool-btn:hover{ background:#f3f4f6; }
.tool-btn.active{ outline:2px solid var(--accent); }
.tool-btn svg{ width:18px; height:18px; }

.swatch input[type="color"]{
  -webkit-appearance:none; appearance:none;
  width:36px; height:36px; border:1px solid var(--line); border-radius:10px; padding:0; background:var(--panel);
}
.swatch input[type="color"]::-webkit-color-swatch{ border-radius:8px; border:none; }
.swatch input[type="color"]::-moz-color-swatch{ border-radius:8px; border:none; }

input[type="range"]{ width:160px; }

.chip{
  padding:4px 8px; background:var(--chip); color:#374151;
  border:1px solid var(--line); border-radius:999px; font-size:12px;
}

.visually-hidden{ position:absolute !important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0; }

/* Small screens */
@media (max-width: 900px){
  main{ grid-template-columns: 1fr; }
  aside{ order:2; min-height:auto; }
  .canvas-wrap{ order:1; min-height: 70vh; }
  .toolbox{ top:auto; bottom:14px; left:50%; transform:translateX(-50%); flex-direction:row; }
}


/* Keep toolbox above all canvases and clickable */
.toolbox{
  z-index: 20;             /* higher than #cursors (2) */
  pointer-events: auto;
}
canvas{
  pointer-events: auto;    /* default â€“ drawing still works */
}
#cursors{
  pointer-events: none;    /* cursors layer stays non-blocking */
}
